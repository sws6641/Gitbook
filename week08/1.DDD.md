# 1. DDD

## 학습 키워드

- 도메인 주도 설계
- 기술 부채의 의미

***

### 도메인 주도 설계

- **정의**

  - 도메인을 중심으로 설계해 나가는 방법

  - 도메인 패턴을 중심에 놓고 설계하는 방식

#### 도메인이란?

- 소프트웨어로 해결해야할 문제의 영역

- 도메인이라는 것은 '영역'을 말한다. 그러니 비즈니스상에서 도메인이란 '업무의 집합'이라고 봐야한다.

  - 예를 들어 고객이 원하는 상품을 어떻게 잘 제공할 것인가? 의 대한 문제는 커머스라는 도메인이 있습니다.
  - 커머스 도메인의 하위 도메인으로 판매자가 무엇을 판매할 것인가? 의 대한 문제는 상품이라는 도메인이 있고
  - 공통된 상품에 대해서 어떻게 공통 정보를 제공할 것인가? 의 대한 문제는 카탈로그 도메인이 있습니다.
  - 그 밖에 판매자, 사용자, 카테고리, 주문, 배송 등 많은 도메인이 존재합니다.

- **역사 또는 왜 필요한가/왜 생겼는가**

  - 데이터베이스 위주의 개발 (데이터베이스 모델링을 중요시)
  
    - 비즈니스 로직과 저장 기술이 강하게 결합되어 있는 구조인 경우, 저장소를 변경하기 쉽지 않다.

    - 성능 측면에서 성능을 데이터베이스에 의존하게 된다.

    - 이러면 데이터가 많아졌을 때 데이터베이스의 성능은 지속적으로 떨어진다.

    - 이를 최적화 하기 위해 데이터베이스 서버의 사양과 용량을 계속 증가시키고 쿼리 튜닝에 몰두할 수 밖에 없다.

  - 트랜잭션 스크립트 패턴

    - 서비스(Spring에서 사용되는 Service를 말함)에 모든 비즈니스 로직이 있고 비즈니스 절차에 따라 도메인 객체를 이용해 처리한다.

    - 도메인 객체는 단지 속성값만 이용되는 정보 묶음의 역할만 하게 된다.

    - 서비스는 유스케이스 처리의 단위이고 대부분의 비즈니스 로직 처리가 서비스에서 이뤄지므로 비슷한 유스케이스의 경우 서비스에 **중복되는 코드가 계속 생겨날 수 있고 이런한 점이 유지보수를 어렵게 한다**.

    - 비즈니스 로직을 테스트하기 위해 Mocking을 해야하고 이는 테스트의 복잡성을 높이고 관리하기 어려운 테스트 코드를 발생시킨다.

- **특징**

  - 도메인 그 자체와 도메인 로직에 초점을 맞춘다. 일반적으로 많이 사용하는 데이터 중심의 접근법을 탈피해서 순수한 도메인의 모델과 로직에 집중하는 것을 말한다.

  - 보편적인(ubiquitous) 언어의 사용이다. 도메인 전문가와 소프트웨어 개발자 간의 커뮤니케이션 문제를 없애고 상호가 이해할 수 있고 모든 문서와 코드에 이르기까지 동일한 표현과 단어로 구성된 단일화된 언어체계를 구축해나가는 과정을 말한다. 이로서 분석 작업과 설계 그리고 구현에 이르기까지 통일된 방식으로 커뮤니케이션이 가능해진다.

  - 소프트웨어 엔티티와 도메인 컨셉트를 가능한 가장 가까이 일치시키는 것이다. 분석 모델과 설계가 다르고 그것과 코드가 다른 구조가 아니라 도메인 모델부터 코드까지 항상 함께 움직이는 구조의 모델을 지향하는 것이 DDD의 핵심원리이다.

### 기술 부채(Technical Debt)의 의미

- 소프트웨어를 출시하면, 우리는 뭔가를 배우게 된다(마찬가지로 Eric Evans는 지식 탐구, 지속적인 학습을 강조한다). 하지만 대부분은 이를 다시 설계와 코드에 반영하지 않는다. 이는 갚을 생각 없이 돈을 빌리는 것과 같은 일이다.

- 배웠으면 갚아야 한다. 우리의 이해가 설계와 코드에 반영되지 않으면, 이해하기 어려운 복잡한 설계와 코드 앞에 좌절하고, 작업하는데 더 오래 걸릴 거다. 이게 기술 부채가 의미하는 거다.
