# 3. Entity, Value Object

## 학습 키워드

- 전술적 설계 (Tactical Design)
- 엔티티 (Entity) vs 일반적으로 이야기하는 개체 (Entity)
- 값 객체 (Value Object, VO)
- 동일성(Identity)과 동등성(Equality)

***

### 전술적 설계 (Tactical Design)

- 애플리케이션의 도메인 계층 내에서 코드를 구조화하고 구성하는 데 사용되는 특정 패턴 및 관행을 나티낸다.

- 전술적 설계만 다룰 경우에는 DDD Lite, Model Driven Degisn이라고도 한다.

- 전략적 설계 패턴은 커다란 시스템을 만들 때는 더욱 중요하지만, 우리가 지금 다룰 수 있는 주제는 아니다.

- 보편 언어(Ubiquitous Language)를 통해 도메인 모델을 발견했을 것이고, 우리는 이를 설계와 코드에 반영할 수 있다. 이게 바로 모델 주도 설계(Model Driven Design)이다.

- 도메인 모델의 대표적인 몇 가지 패턴:

  1. Entity
  2. Value Object
  3. Aggregate
  4. Repository

### 엔티티 (Entity) vs 일반적으로 이야기하는 개체 (Entity)

- OOP에서 대부분의 객체는 속성이 아니라 연속성, 식별성에 따라 정의된다.

- ex) 앨리스는 키가 변한다고 해도 앨리스다.

- 거칠게 이야기하면, 식별자(Identifier)가 존재하고, 이를 통해 동일성(Identity)을 확인한다면 DDD의 Entity라고 할 수 있다.

### 값 객체 (Value Object, VO)

- 어떤 객체는 연속성, 식별성이 중요하지 않다.

- ex) 만 원은 그냥 만 원으로 다루는 게 “여기 있는 만 원”과 “저기 있는 만 원”이 다르다고 주장하는 것보다 훨씬 유용하다.

- 고유한 ID가 없고 속성만을 통해 동등성(Equality)을 판단함

- 무엇이 Entity이고, VO인지는 비즈니스 도메인에 달려 있음

- ex) 검은 돈을 추적하고 있다면 “여기 있는 만 원”과 “저기 있는 만 원”은 일련번호 등으로 구분해서 다뤄야 한다.

- 항상 Java의 equals 메서드를 구현해야 한다.

- 또한, 예측 가능성을 높이고 혼란을 막기 위해, 가능하면 불변 객체(final)로 만들어야 한다.

### 동일성(Identity)과 동등성(Equality)

> 동일성 : ID를 비교하여 완전히 동일한지 확인   
동등성 : 속성을 비교하여 동등한지 확인

- 지폐가 있다면 금액만 같으면 동등성 만족

- 지폐 고유번호까지 같아야 동일성 만족
