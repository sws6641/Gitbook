# 1. ORM

## 학습 키워드

- ORM
- JPA(Jakarta Persistence API)
- Jakarta EE
- Entity

***

### ORM (Object-Relational Mapping)

- 정의

  - 객체와 관계형 데이터베이스의 데이터를 자동으로 매핑해주는 것을 말한다.

  - 클래스와 테이블은 서로가 기존부터 호환가능성을 두고 만들어진 것이 아니기 때문에 불일치가 발생힌다.

  - 이를 ORM을 통해 객체 간의 관계를 바탕으로 SQL문을 자동으로 생성하여 불일치를 해결한다.

- 역사

  - 자바는 객체 지향 패러다임으로 만들어졌다.

  - 데이터 베이스는 관계형 DB 패러다임으로 만들어졌다.

  - 탄생 배경부터가 다른 패러다임을 두고 만들어졌기 때문에 이 두 소프트웨어는 어쩔 수 없는 간극이 생긴다.

  - 프로그래머의 업무는 객체를 CRUD 하는 SQL을 만드는 단순 노동이 된다.

  - SQL에 의존적인 개발을 할 수 밖에 없다.

  - 프로그램을 객체 지향적으로 설계하는데 데이터베이스가 방해된다.

  - 이러한 패러다임의 불일치를 해결하고자 나온 기술이 <strong>ORM 프레임워크다.</strong>

- 특징

  - 일반적인 ORM 도구들은 SQL문을 자동으로 생성하고, 그렇기 때문에 다양한 DBMS에 대응하기 좋다.

  - SQL 작성 및 매핑 작업이 자동으로 이뤄지기 때문에 우리가 비즈니스 로직에 집중할 수 있게 돕고 유지보수하기 좋다.

  - 이를 통해 데이터베이스에 끌려가는 무기력한 도메인 객체가 아닌, 객체지향 원칙을 따르는 도메인 객체를 영속화할 수 있게 된다.

- 장점

  - 객체 지향적인 코드로 인해 더 직관적이고 비즈니스 로직에 더 집중할 수 있게 도와준다.

  - 재사용 및 유지보수의 편리성이 증가한다.

  - DBMS에 대한 종속성이 줄어든다.

- 단점

  - 완벽한 ORM 으로만 서비스를 구현하기가 어렵다.

  - 프로시저가 많은 시스템에선 ORM의 객체 지향적인 장점을 활용하기 어렵다.

#### 영속성

- 데이터를 생성한 프로그램이 종료되더라도 사라지지 않는 데이터의 특성.

### JPA(Jakarta Persistence API)

- 정의

  - 애플리케이션의 데이터를 객체지향 관점으로 바라보고 다룰 수 있게 해주는 자바 진영의 ORM 기술표준인 객체지향 기술

  - 자바 어플리케이션에서 관계형 데이터베이스를 사용하는 방식을 정의한 인터페이스

  - 인터페이스 이기 때문에 Hibernate, OpenJPA 등이 JPA를 구현함

- 역사

  - 개발은 객체 지향이 아닌 SQL 에 의존하는 개발 방식을 사용할 수 밖에 없었다.

  - 객체 지향적으로 코드를 설계하기를 원했다.

  - 그래서 등장한것이 ORM 이다.

- 특징

  - 자바 ORM 기술에 대한 표준 명세로, JAVA에서 제공하는 API이다. 스프링에서 제공하는것이 아니다.

  - 자바 어플리케이션에서 관계형 데이터베이스를 사용하는 방식을 정의한 인터페이스다.

  - ORM이기 때문에 자바 클래스와 DB테이블을 매핑한다.(SQL을 매핑하지않는다)

  - ORM을 사용하기 위한 인터페이스를 모아둔 것이며, JPA를 사용하기 위해서는 JPA를 구현한 Hibernate, EclipseLink, DataNucleus같은 ORM 프레임워크를 사용해야 한다.

- 장점

  - 특정 데이터베이스에 종속되지 않음(Oracle, MySql등 쿼리문이 다르지만 종속되지 않고 사용 가능)

  - 객체지향적 프로그래밍

  - 생산성 향상

- 단점

  - 복잡한 쿼리 처리(복잡한 쿼리를 사용할 경우는 SQL문을 사용하는 게 나을 수도 있다)

  - 성능 저하 위험

  - 학습하는 데 시간이 오래 걸린다.

### Jakarta EE

- 정의

  - 이클립스 재단으로 이관된 자바EE의 공식 명칭

- 특징

  -  기존 JCP 정책이 아닌 오픈소스 기반의 자카르타EE 사양 프로세스(Jakarta EE Specification Process, JESP)라는 개방적이고 중립적인 정책을 따른다.

  - 자카르타EE는 자바EE를 대체하지 않았고 둘 다 공존하고 있다.

  - 자카르타EE는 자바EE 8에서 하드포크된 새로운 플랫폼으로 기존 자바EE와 호환되지 않는다.

### Entity

#### JPA Entity

> DB의 Entity : 컨테이너 관리 지속성을 활용하여 관계형 데이터베이스에 저장된 영구 데이터
<br>
OOP의 Entity : 단일 비즈니스 프로세스에서 비즈니스 엔티티 혹은 여러 액션을 모델링한 것

- 정의

  - DB 테이블에 대응하는 하나의 클래스

- 특징

  - @Entity가 붙은 클래스는 JPA가 관리해주며 JPA를 사용해서 DB 테이블과 매핑할 클래스는 @Entity를 꼭 붙여야만 매핑이 가능하다.

  - JPA에서 "하나의 엔티티 타입을 생성한다"라는 의미는 "하나의 클래스를" 작성한다는 의미가 됩니다.
