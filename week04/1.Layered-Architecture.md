# 1. Layered Architecture

### 학습 키워드

- 관심사의 분리
- 응집도
- 결합도
- Layered Atchitecture
- UUID



***


### 관심사의 분리(Separation of Concerns)
* 컴퓨터 프로그램을 구별된 부분으로 분리시키는 디자인 원칙
* 시스템 내부에서 질서를 달성하기 위해 소프트웨어 요소의 상관관계와 설계를 적용하는 것
* 정보를 잘 정의된 인터페이스가 있는 코드 부분 안에 캡슐화시킨다.

#### 모듈화
* 소프트웨어를 각 기능별로 나누는 것

#### 모듈
* 각각의 기능별로 나눠진 모듈화의 결과

* 즉, 독립성이 높은 모듈일수록 좋다. 독립성이 높으면 해당 모듈을 수정하더라도 다른 모듈에 끼치는 영향이 적으며 오류가 발생하더라도 쉽게 문제를 발견하고 해결할 수 있는 장점을 갖는다.

* 모듈의 독립성은 모듈의 결합도(Coupling)과 응집도(Cohesion)로 측정한다.

* 결론적으로는 모듈의 독립성을 높이기 위해서는 모듈 간의 상호 의존 정도를 나타내는 결합도를 낮추고 모듈이 독립적으로 자체 기능만을 수행하도록 응집도를 높여야 한다.

### 응집도
* 한 모듈 내부의 처리 요소들이 서로 관련되어 있는 정도를 말한다.
* 모듈이 독립적인 기능을 수행하는지 또는 하나의 기능을 중심으로 책임이 잘 뭉쳐있는지를 나타낸다.
* 모듈이 높은 응집도를 가질수록 좋다.

### 결합도
* 서로 다른 모듈 간에 상호 의존하는 정도 또는 연관된 관계
* 예를들어 결합도가 높은 클래스는 다른 클래스와 연관된 정도가 높다. 
* 따라서 해당 클래스를 변경하면 연관된 클래스도 변경해야 하며, 다른 코드에서 클래스를 재사용하기도 어렵다.
* 결합도가 낮아야 변경에 더 유연하고, 재사용 하기 쉽다.

### Layered Architecture
* 비즈니스 로직을 독립적으로 분리해서 계층을 나눈 구조이다.
* 일반적으로는 3계층으로 분리된다.
  * 프레젠테이션 : HTTP 요청 처리와 HTML 랜더링을 하는 웹 계층
  * 애플리케이션 : 유효성 검사 및 계산을 담당하는 비즈니스 논리 계층
  * 데이터 : 데이터베이스 등 데이터를 관리하는 데이터 액세스 계층
* 에릭 에반스의 DDD 4계층도 있다.
  * 사용자 인터페이스 : 사용자에게 정보를 보여주고 명령을 해석하는 계층
  * 응용 계층 : 수행할 작업을 정의만 하고, 작업은 도메인 계층에게 위임하는 계층
  * 도메인 계층 : 업무를 직접 수행하는 핵심 계층, 저장은 인프라스트럭처 계층에 위임
  * 인프라스트럭처 계층 : 메시지 전송, 도메인 영속화 등 기술적 기능을 제공하는 계층
* 계층간 결합은 설계 의존성을 한 방향으로만 두고 느슨하게 결합해야 분리한 이점을 * 살리면서 연결할 수 있다.


### UUID(Universally Unique IDentifier)
* 네트워크 상에서 고유성이 보장되는 id를 만들기 위한 표준 규약
* 네트워크는 ID를 관리하는 중앙 관리자가 없기 때문에 중복 확인이 불가능하다.
* 따라서 네트워크 상에서 중복되지 않는 ID를 만들려면 중복되는 확률이 0에 가까운 ID를 만드는 방법을 사용해야 한다. 
* 128비트의 숫자이며, 32자리의 16진수로 표현된다.
* 8-4-4-4-12라는 5개의 그룹을 하이픈으로 구분한다.
  * 550e8400-e29b-41d4-a716-446655440000

#### ULID(Universally Unique Lexicographically Sortable Identifier)
* 대소문자를 구별하지 않는 시간을 나타내는 26자 글자와 16글자의 임의의 값으로 구성되어 있다.
* 생성 순서를 밀리세컨 단위로 기록할 수 있어서, 생성 순서대로 정렬을 할 때 편하다.
* ULID는 UUID의 단점을 극복하고자 만들어졌다. 
* UUID는 타임스탬프 같은 배경 없이 그냥 무작위의 값을 생성해낸다.

#### TSID(Time-Sorted Unique Identifier)
* 세대 시간순으로 정렬됨.
* 64비트 정수로 저장할 수 있습니다.
* 13자의 문자열로 저장할 수 있습니다.
* 문자열 형식은 Crockford의 base32 로 인코딩됩니다 .
* 문자열 형식은 URL 안전하고 대소문자를 구분하지 않으며 하이픈이 없습니다.
* UUID, ULID 및 KSUID보다 짧습니다.
* Twitter의 Snowflake와 ULID spec을 합쳐 만든 자바의 라이브러리
